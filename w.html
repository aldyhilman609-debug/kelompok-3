<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Camera Device</title>
  <link rel="stylesheet" href="https://aldyhilman609-debug.github.io/kelompok-3/w.css">
  <style>
    body {
      display: grid;
      place-items: center;
      min-height: 100vh;
      background: #ffd1dc;
    }
    .lens video {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
    canvas { display: none; }
    .photo {
      position: absolute;
      top: 300px;
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
      width: 200px;
      height: 240px;
      background: white;
      border: 6px solid #eee;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      opacity: 0;
      border-radius: 6px;
      transition: all 2s ease;
    }
    .photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <div class="camera">
    <div class="camera-body">
      <div class="top-strip"></div>
      <div class="flash"></div>
      <div class="shutter">Snap</div>
      <div class="flash-overlay"></div>
      <div class="lens">
        <!-- live camera feed -->
        <video id="camera" autoplay playsinline></video>
        <div class="lens-inner"></div>
        <div class="lens-glare"></div>
      </div>
    </div>
  </div>

  <!-- hidden canvas for capture -->
  <canvas id="canvas"></canvas>

  <!-- photo output -->
  <div class="photo">
    <div class="photo-content">
      <img id="photo" alt="Captured photo">
    </div>
  </div>

  <script>
    const shutter = document.querySelector('.shutter');
    const flashOverlay = document.querySelector('.flash-overlay');
    const video = document.getElementById('camera');
    const canvas = document.getElementById('canvas');
    const photo = document.getElementById('photo');
    const photoContainer = document.querySelector('.photo');

    // open front camera
    navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
      .then(stream => {
        video.srcObject = stream;
      })
      .catch(err => {
        console.error("Camera access denied:", err);
      });

    shutter.addEventListener('click', () => {
      // flash effect
      flashOverlay.style.opacity = '1';
      setTimeout(() => {
        flashOverlay.style.opacity = '0';
      }, 150);

      // capture frame from video
      const context = canvas.getContext('2d');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      context.drawImage(video, 0, 0, canvas.width, canvas.height);

      // show captured photo
      photo.src = canvas.toDataURL('image/png');

      // animate photo sliding out
      photoContainer.style.transition = 'none';
      photoContainer.style.opacity = '0';
      photoContainer.style.transform = 'translateX(-50%) translateY(-20px)';

      setTimeout(() => {
        photoContainer.style.transition = 'all 2s ease';
        photoContainer.style.opacity = '1';
        photoContainer.style.transform = 'translateX(-50%) translateY(40px)';
      }, 50);
    });
  </script>
</body>
</html>
